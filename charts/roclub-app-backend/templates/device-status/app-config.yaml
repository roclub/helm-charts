apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "roclub-app-backend.fullname" . }}
  labels:
    {{- include "roclub-app-backend.labels" . | nindent 4 }}
    {{ include "roclub-app-backend.labels-device-status" . }}
data:
  device-status.toml: |-
    [connector-status]

        [connector-status.config]
        roclub_connector_timeout = 60

        [connector-status.kafka]
        bootstrap_servers = "{{ .Values.config.flowManager.kafka.bootstrapServers }}"
        group_id = "{{ .Values.config.flowManager.kafka.groupdID }}"
        auto_offset_reset = "latest"
        enable_auto_commit = false
        security_protocol = "SASL_SSL"
        sasl_mechanisms = "PLAIN"
        sasl_username = "{{ .Values.config.flowManager.kafka.saslUsername }}"
        sasl_password = "{{ .Values.config.flowManager.kafka.saslPassword }}"
        topics = [ "device_status" ]
        poll_intervall = 15000

        [connector-status.repository]
        mongodb_connection_string = "{{ .Values.config.flowManager.database.mongoDBConnectionString }}"
        mongodb_database = "roclub-connector"
        mongodb_collection = "status"

        [connector-status.roclubapp]
        webhoook_endpoint = "{{ .Values.config.flowManager.roclubApp.webhoookEndpoint }}"
        webhook_token = "{{ .Values.config.flowManager.roclubApp.webhookToken }}"
        webhook_trigger_intervall = {{ .Values.config.flowManager.roclubApp.webhookTriggerIntervall }}
    
    [logger]
    level = "{{ .Values.config.logging.logLevel }}"
